import"./hoisted.49d07815.js";const c=t=>{if(t&&(t.organizerLink&&!t.organizerLink.startsWith("http")&&(t.organizerLink=`https://${t.organizerLink}`),t.signupLink&&!t.signupLink.startsWith("http")&&(t.signupLink=`https://${t.signupLink}`),!t.locationLink&&t.location)){const n=t.location.split(" ");n.length>1?t.locationLink=`https://www.google.com/maps/place/${n[0]}+${n[1]},+Oulu+Finland`:t.locationLink=`https://www.google.com/maps/place/${n[0]},+Oulu+Finland`}},i=document.getElementById("submit-form"),s=document.getElementById("submit-form-fieldset"),o=t=>{document.getElementById("submit-error-element").classList.remove("hidden"),document.getElementById("submit-error-message").textContent=t};async function d(t){if(t.preventDefault(),!i||!s){console.log("no element");return}const n=Object.fromEntries(new FormData(i).entries());c(n);const r={...n,date:new Date(`${n.date}T${n.time}:00`).toISOString()};s.disabled=!0;const[e]=await Promise.allSettled([fetch("https://api.admin-e68.workers.dev/",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),new Promise(l=>setTimeout(l,800))]);if(s.disabled=!1,!e.status||e.status==="rejected"){o(e.reason||"unknown error");return}if(e.status!=="fulfilled"){o("no response");return}if(e.status==="fulfilled"&&e.value.ok===!1){console.error(await e.value.json()),o(`Submission failed, status ${e.value.status}, ${e.value.statusText}. Please try again later`);return}const a=await e.value.json();console.log(a),window.location.assign(`/success?githubLink=${encodeURIComponent(a.issueUrl)}`)}i.addEventListener("submit",d,!1);
