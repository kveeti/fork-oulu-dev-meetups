import{formatMeetupData as g}from"./utils.08e5c1db.js";import"./hoisted.3a356783.js";var h=globalThis&&globalThis.__assign||function(){return h=Object.assign||function(i){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i[n]=a[n])}return i},h.apply(this,arguments)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__rest;var y=["title","description","date","time","location","locationLink","organizer","organizerLink","signupLink"];function w(i){if(!i||typeof i!="object")throw new Error("Missing values");y.forEach(function(a){if(!(a in i))throw new Error("Meetup form values is missing '".concat(a,"'"))})}const b=document.getElementById("submit-form"),d=document.getElementById("submit-form-fieldset"),m=i=>{document.getElementById("submit-error-element").classList.remove("hidden"),document.getElementById("submit-error-message").textContent=i};async function v(i){if(i.preventDefault(),!b||!d){console.log("no element");return}const a=Object.fromEntries(new FormData(b).entries());w(a);const t=g(a),o={...t,date:new Date(`${t.date}T${t.time}:00`).toISOString()};d.disabled=!0;const[n]=await Promise.allSettled([fetch("https://api.admin-e68.workers.dev/",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}),new Promise(s=>setTimeout(s,800))]);if(d.disabled=!1,!n.status||n.status==="rejected"){m(n.reason||"unknown error");return}if(n.status!=="fulfilled"){m("no response");return}if(n.status==="fulfilled"&&n.value.ok===!1){console.error(await n.value.json()),m(`Submission failed, status ${n.value.status}, ${n.value.statusText}. Please try again later`);return}const e=await n.value.json();console.log(e),window.location.assign(`/success?githubLink=${encodeURIComponent(e.issueUrl)}`)}b.addEventListener("submit",v,!1);
